<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="DDAP - Dynamic Data API Provider Documentation">
    <title>Templates | DDAP Documentation</title>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="lib/github-markdown.min.css">
    <script src="lib/marked.min.js"></script>
    <script src="lib/purify.min.js"></script>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üéõÔ∏è</text></svg>">
</head>
<body>
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- Header with theme toggle -->
    <header class="site-header">
        <nav class="nav-container" role="navigation" aria-label="Main navigation">
            <div class="nav-brand">
                <a href="index.html" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 0.5rem;">
                    <span class="logo" aria-label="DDAP Logo">üéõÔ∏è</span>
                    <span class="brand-name">DDAP</span>
                </a>
            </div>
            <div class="nav-links">
                <a href="get-started.html">Get Started</a>
                <a href="philosophy.html">Philosophy</a>
                <a href="https://github.com/schivei/ddap" target="_blank" rel="noopener noreferrer">
                    <span aria-hidden="true">GitHub</span>
                    <span class="sr-only">GitHub (opens in new tab)</span>
                </a>
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme" aria-live="polite">
                    <span class="theme-icon" aria-hidden="true">üåô</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Main content -->
    <main id="main-content" class="doc-page">
        <div class="container">
            <article class="markdown-body doc-content" id="content">
                Loading...
            </article>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>DDAP</h3>
                    <p>Built with ‚ù§Ô∏è by developers who believe in control, not constraints.</p>
                </div>
                <div class="footer-section">
                    <h3>Resources</h3>
                    <ul>
                        <li><a href="get-started.html">Getting Started</a></li>
                        <li><a href="philosophy.html">Philosophy</a></li>
                        <li><a href="https://github.com/schivei/ddap" target="_blank" rel="noopener noreferrer">GitHub</a></li>
                        <li><a href="https://www.nuget.org/packages/Ddap.Core" target="_blank" rel="noopener noreferrer">NuGet</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Community</h3>
                    <ul>
                        <li><a href="https://github.com/schivei/ddap/issues" target="_blank" rel="noopener noreferrer">Issues</a></li>
                        <li><a href="https://github.com/schivei/ddap/discussions" target="_blank" rel="noopener noreferrer">Discussions</a></li>
                        <li><a href="https://github.com/schivei/ddap/blob/main/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">Contributing</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Legal</h3>
                    <ul>
                        <li><a href="https://github.com/schivei/ddap/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">MIT License</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="copyright">&copy; 2024 DDAP Contributors. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="theme-toggle.js"></script>
    <script src="language-switcher.js"></script>
    <script>
        // Load and render markdown content with language support
        const baseMdFile = 'templates.md';
        
        function getLocalizedMarkdownPath(baseFile) {
            // Get current language from localStorage or default to 'en'
            const currentLang = localStorage.getItem('ddap-language') || 'en';
            
            // If English, use the base file
            if (currentLang === 'en') {
                return baseFile;
            }
            
            // For other languages, try to load from locales directory
            // e.g., get-started.md -> locales/pt-br/get-started.md
            return `locales/${currentLang}/${baseFile}`;
        }
        
        function loadMarkdown(mdPath) {
            fetch(mdPath)
                .then(response => {
                    if (!response.ok) {
                        // If translated version not found, fallback to English
                        if (mdPath.includes('locales/')) {
                            console.log(`Translated version not found, loading English version`);
                            return fetch(baseMdFile);
                        }
                        throw new Error('Document not found');
                    }
                    return response.text();
                })
                .then(markdown => {
                    const rawHtml = marked.parse(markdown);
                    const sanitizedHtml = DOMPurify.sanitize(rawHtml);
                    document.getElementById('content').innerHTML = sanitizedHtml;
                    document.title = (document.querySelector('#content h1')?.textContent || 'Templates') + ' | DDAP Documentation';
                })
                .catch(error => {
                    document.getElementById('content').innerHTML = 
                        '<h1>Error Loading Document</h1><p>Could not load the requested document.</p>';
                });
        }
        
        // Load markdown with current language
        const mdFile = getLocalizedMarkdownPath(baseMdFile);
        loadMarkdown(mdFile);
        
        // Listen for language changes (when user switches language)
        window.addEventListener('storage', (e) => {
            if (e.key === 'ddap-language') {
                // Reload content with new language
                const newMdFile = getLocalizedMarkdownPath(baseMdFile);
                loadMarkdown(newMdFile);
            }
        });
    </script>
</body>
</html>
